<!DOCTYPE html>
<html lang="vi" xmlns="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Chi tiết đơn hàng</title>
  <script src="https://cdn.tailwindcss.com/3.4.16"></script>
  <script>tailwind.config = { theme: { extend: { colors: { primary: '#e11d48', secondary: '#f97316' }, borderRadius: { 'none': '0px', 'sm': '4px', DEFAULT: '8px', 'md': '12px', 'lg': '16px', 'xl': '20px', '2xl': '24px', '3xl': '32px', 'full': '9999px', 'button': '8px' } } } }</script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/remixicon/4.6.0/remixicon.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="/css/shared/footer.css">
  <link rel="stylesheet" href="/css/shared/header.css">
  <link rel="stylesheet" href="/css/shared/chatbox.css">
  <style>
    :where([class^="ri-"])::before {
      content: "\f3c2";
    }

    body {
      font-family: 'Inter', sans-serif;
    }

    .active-link {
      color: #e5a500;
      font-weight: 600;
    }

    .status-pending {
      color: #e5a500;
    }
  </style>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: { primary: "#e5a500", secondary: "#4a5568" },
          borderRadius: {
            none: "0px",
            sm: "4px",
            DEFAULT: "8px",
            md: "12px",
            lg: "16px",
            xl: "20px",
            "2xl": "24px",
            "3xl": "32px",
            full: "9999px",
            button: "8px",
          },
        },
      },
    };
  </script>
</head>

<body class="bg-[#f2f2f2]">
  <!-- Header -->
  <div th:insert="views/shared/header :: siteHeader" style="margin-bottom: 40px;"></div>
  <!-- chatbox -->
  <div th:insert="views/shared/chatbot :: siteChatbot"></div>
  <!-- Zalo icon -->
  <div th:insert="views/shared/zalo :: siteZalo"></div>

  <!-- Wrapper bên ngoài căn giữa -->
  <div class="pt-[120px] flex justify-center bg-[#f2f2f2] px-4 pb-10">
    <!-- Container chính, max-width 1250px, padding đều -->
    <div class="w-full max-w-[1250px] bg-white shadow-md rounded-lg px-8 py-6">

      <!-- Order Header -->
      <div class="flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-2">
        <h1 class="text-3xl font-bold text-gray-900">Chi tiết đơn hàng</h1>
        <p class="text-gray-500 text-base">Ngày tạo: <span
            th:text="${#temporals.format(order.orderDate, 'dd/MM/yyyy')}"></span></p>
      </div>

      <!-- Order Status -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="flex items-center text-base">
          <span class="text-gray-700 font-semibold mr-1">TT thanh toán:</span>
          <span th:text="${order.paymentStatus}" class="status-pending font-semibold text-[#e5a500]"></span>
        </div>
        <div class="flex items-center text-base">
          <span class="text-gray-700 font-semibold mr-1">TT vận chuyển:</span>
          <span th:text="${order.orderStatus}" class="status-pending font-semibold text-[#e5a500]"></span>
        </div>
        <div class="flex items-center text-base">
          <span class="text-gray-700 font-semibold mr-1">Mã vận đơn:</span>
          <span class="text-gray-800 font-medium">—</span>
        </div>
      </div>

      <!-- Order Info Boxes -->
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
        <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
          <h2 class=" font-bold mb-2 text-lg text-[#080c8c]">ĐỊA CHỈ GIAO HÀNG</h2>
          <p th:text="${order.member.fullname}" class="text-gray-800 text-base font-semibold"></p>
          <p th:text="${order.address}" class="text-gray-700 text-sm"></p>
          <p th:text="${order.member.phone}" class="text-gray-700 text-sm"></p>

        </div>

        <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
          <h2 class="text-[#080c8c] font-bold mb-2 text-lg">THANH TOÁN</h2>
          <p th:text="${session.paymentMethod}" class="text-gray-700 text-base font-semibold"></p>
        </div>

        <div class="bg-white p-4 rounded-lg border border-gray-200 shadow-sm">
          <h2 class="text-[#080c8c] font-bold mb-2 text-lg">GHI CHÚ</h2>
          <p th:text="${#strings.isEmpty(order.note) ? 'Không có ghi chú' : order.note}"
            class="text-gray-700 text-base font-semibold">
          </p>
        </div>

      </div>

      <!-- Order Items -->
      <div class="bg-white rounded-lg border border-gray-200 overflow-hidden mb-6">
        <table class="w-full table-auto border-collapse">
          <thead class="bg-gray-50">
            <tr>
              <th class="py-3 px-4 border border-gray-200 text-left text-gray-700 font-bold text-base">Sản phẩm</th>
              <th class="py-3 px-4 border border-gray-200 text-right text-gray-700 font-bold text-base min-w-[120px]">Số
                serial</th>
              <th class="py-3 px-4 border border-gray-200 text-right text-gray-700 font-bold text-base min-w-[120px]">
                Đơn giá</th>
              <th class="py-3 px-4 border border-gray-200 text-center text-gray-700 font-bold text-base min-w-[100px]">
                Số lượng</th>
              <th class="py-3 px-4 border border-gray-200 text-right text-gray-700 font-bold text-base min-w-[120px]">
                Tổng</th>
            </tr>
          </thead>
          <tbody>
            <tr th:each="detail : ${orderDetails}" class="text-base">
              <td class="py-3 px-4 border border-gray-200">
                <div class="flex items-center gap-3">
                  <img th:src="@{'/images/' + ${detail.productVariant.imagesno2}}"
                    class="w-12 h-12 object-contain rounded bg-gray-100" />

                  <div>
                    <!-- Tên sản phẩm -->
                    <div class="text-gray-800 font-semibold text-sm"
                      th:text="${detail.productVariant.product.productName}"></div>

                    <!-- Màu sắc và dung lượng -->
                    <div class="text-gray-500 text-xs mt-1">
                      <span th:text="'Màu: ' + ${detail.productVariant.color}"></span> |
                      <span th:text="'Dung lượng: ' + ${detail.productVariant.storage}"></span>
                    </div>
                  </div>
                </div>
              </td>

              <td class="py-3 px-4 border border-gray-200 text-right text-gray-800 font-medium"></td>

              <td class="py-3 px-4 border border-gray-200 text-right text-gray-800 font-medium"
                th:text="${#numbers.formatDecimal(detail.price, 1, 'COMMA', 0, 'POINT') + '₫'}"></td>

              <td class="py-3 px-4 border border-gray-200 text-center text-gray-800 font-medium"
                th:text="${detail.quantity}"></td>

              <td class="py-3 px-4 border border-gray-200 text-right text-gray-800 font-medium"
                th:text="${#numbers.formatDecimal(detail.price * detail.quantity, 1, 'COMMA', 0, 'POINT') + '₫'}">
              </td>

            </tr>
          </tbody>

        </table>
      </div>




      <div class="bg-white rounded-lg border border-gray-200 p-6 space-y-2">

        <!-- Tổng tiền sản phẩm -->
        <div class="flex justify-between text-base py-1">
          <span class="text-gray-600 font-semibold">Tổng tiền sản phẩm:</span>
          <span class="text-gray-800 font-medium"
            th:text="${#numbers.formatDecimal(productTotal, 1, 'COMMA', 0, 'POINT') + '₫'}">0₫</span>
        </div>

        <!-- Phí vận chuyển -->
        <div class="flex justify-between text-base py-1">
          <span class="text-gray-600 font-semibold">Phí vận chuyển:</span>
          <span class="text-gray-800 font-medium"
            th:text="${#numbers.formatDecimal(shippingFee, 1, 'COMMA', 0, 'POINT') + '₫'}">0₫</span>
        </div>

        <!-- Tạm tính -->
        <div class="flex justify-between text-base py-1">
          <span class="text-gray-600 font-semibold">Tạm tính:</span>
          <span class="text-gray-800 font-medium"
            th:text="${#numbers.formatDecimal(subtotal, 1, 'COMMA', 0, 'POINT') + '₫'}">0₫</span>
        </div>

        <!-- Giảm giá -->
        <div class="flex justify-between text-base py-1" th:if="${discountAmount > 0}">
          <span class="text-gray-600 font-semibold">Giảm giá:</span>
          <span class="text-green-600 font-medium"
            th:text="'- ' + ${#numbers.formatDecimal(discountAmount, 1, 'COMMA', 0, 'POINT') + '₫'}">0₫</span>
        </div>
        <div class="flex justify-between text-base py-1" th:if="${discountAmount <= 0}">
          <span class="text-gray-600 font-semibold">Giảm giá:</span>
          <span class="text-gray-800 font-medium">0₫</span>
        </div>

        <!-- Tổng tiền -->
        <div class="flex justify-between items-center py-3 border-t border-gray-100">
          <span class="text-gray-800 font-bold text-lg">Tổng tiền:</span>
          <span class="text-red-600 text-2xl font-bold"
           th:text="${#numbers.formatDecimal(grandTotal, 1, 'COMMA', 0, 'POINT') + '₫'}">0₫</span>
        </div>
      </div>


    </div>
  </div>



  <!-- Footer -->
  <div th:insert="views/shared/footer :: footerFragment" style="margin-top: 30px;"></div>
</body>

</html>