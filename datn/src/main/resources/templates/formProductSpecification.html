<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Thêm Thông số kỹ thuật</title>
  </head>
  <body>
    <div th:replace="~{dashboard :: nav}"></div>
    <h2>Thêm thông số kỹ thuật</h2>

    <form
      th:action="@{/specification/save}"
      method="post"
      enctype="multipart/form-data"
      accept-charset="UTF-8"
    >
      <!-- Select Product -->
      <label>Chọn sản phẩm:</label>
      <select
        id="productSelect"
        name="productid"
        onchange="showFieldsByProductType()"
        required
      >
        <option value="" disabled selected>-- Chọn sản phẩm --</option>
        <option
          th:each="p : ${products}"
          th:value="${p.productID}"
          th:data-type="${p.category.name.toLowerCase()}"
          th:text="${p.productName}"
        ></option>
      </select>

      <br /><br />

      <div id="form-type-iphone" class="spec-form" style="display: none">
        <h3>Thông số iPhone</h3>
        <div>
          <label>Kích thước màn hình:</label>
          <input type="text" name="specs['Kích thước màn hình']" />
        </div>
        <div>
          <label>Công nghệ màn hình:</label>
          <input type="text" name="specs['Công nghệ màn hình']" />
        </div>
        <div>
          <label>Camera sau:</label>
          <input type="text" name="specs['Camera sau']" />
        </div>
        <div>
          <label>Camera trước:</label>
          <input type="text" name="specs['Camera trước']" />
        </div>
        <div>
          <label>Chipset:</label>
          <input type="text" name="specs['Chipset']" />
        </div>
        <div>
          <label>Công nghệ NFC:</label>
          <input type="text" name="specs['Công nghệ NFC']" />
        </div>
        <div>
          <label>Dung lượng RAM:</label>
          <input type="text" name="specs['Dung lượng RAM']" />
        </div>
        <div>
          <label>Pin:</label>
          <input type="text" name="specs['Pin']" />
        </div>
        <div>
          <label>Thẻ SIM:</label>
          <input type="text" name="specs['Thẻ SIM']" />
        </div>
        <div>
          <label>Hệ điều hành:</label>
          <input type="text" name="specs['Hệ điều hành']" />
        </div>
        <div>
          <label>Độ phân giải màn hình:</label>
          <input type="text" name="specs['Độ phân giải màn hình']" />
        </div>
        <div>
          <label>Tính năng màn hình:</label>
          <textarea name="specs['Tính năng màn hình']" rows="5"></textarea>
        </div>
        <div>
          <label>Loại CPU:</label>
          <input type="text" name="specs['Loại CPU']" />
        </div>
      </div>

      <div id="form-type-ipad" class="spec-form" style="display: none">
        <h3>Thông số iPad</h3>

        <div>
          <label>Kích thước màn hình:</label>
          <input type="text" name="specs['Kích thước màn hình']" />
        </div>
        <div>
          <label>Công nghệ màn hình:</label>
          <input type="text" name="specs['Công nghệ màn hình']" />
        </div>
        <div>
          <label>Camera sau:</label>
          <input type="text" name="specs['Camera sau']" />
        </div>
        <div>
          <label>Camera trước:</label>
          <input type="text" name="specs['Camera trước']" />
        </div>
        <div>
          <label>Chipset:</label>
          <input type="text" name="specs['Chipset']" />
        </div>
        <div>
          <label>Công nghệ NFC:</label>
          <input type="text" name="specs['Công nghệ NFC']" />
        </div>
        <div>
          <label>Dung lượng RAM:</label>
          <input type="text" name="specs['Dung lượng RAM']" />
        </div>

        <div>
          <label>Pin:</label>
          <input type="text" name="specs['Pin']" />
        </div>
        <div>
          <label>Thẻ SIM:</label>
          <input type="text" name="specs['Thẻ SIM']" />
        </div>
        <div>
          <label>Hệ điều hành:</label>
          <input type="text" name="specs['Hệ điều hành']" />
        </div>
        <div>
          <label>Độ phân giải màn hình:</label>
          <input type="text" name="specs['Độ phân giải màn hình']" />
        </div>
        <div>
          <label>Tính năng màn hình:</label>
          <textarea name="specs['Tính năng màn hình']" rows="5"></textarea>
        </div>
        <div>
          <label>Loại CPU:</label>
          <input type="text" name="specs['Loại CPU']" />
        </div>
        <div>
          <label>Tương thích:</label>
          <textarea name="specs['Tương thích']" rows="4"></textarea>
        </div>
      </div>

      <!-- Macbook Form -->
      <div id="form-type-macbook" class="spec-form" style="display: none">
        <h3>Thông số MacBook</h3>

        <div>
          <label>Loại card đồ họa:</label>
          <textarea name="specs['Loại card đồ họa']" rows="4"></textarea>
        </div>

        <div>
          <label>Dung lượng RAM:</label>
          <input type="text" name="specs['Dung lượng RAM']" />
        </div>
        <div>
          <label>Kích thước màn hình:</label>
          <input type="text" name="specs['Kích thước màn hình']" />
        </div>

        <div>
          <label>Công nghệ màn hình:</label>
          <textarea name="specs['Công nghệ màn hình']" rows="4"></textarea>
        </div>

        <div>
          <label>Pin:</label>
          <textarea name="specs['Pin']" rows="3"></textarea>
        </div>

        <div>
          <label>Hệ điều hành:</label>
          <input type="text" name="specs['Hệ điều hành']" />
        </div>

        <div>
          <label>Độ phân giải màn hình:</label>
          <input type="text" name="specs['Độ phân giải màn hình']" />
        </div>

        <div>
          <label>Loại CPU:</label>
          <input type="text" name="specs['Loại CPU']" />
        </div>

        <div>
          <label>Cổng giao tiếp:</label>
          <textarea name="specs['Cổng giao tiếp']" rows="4"></textarea>
        </div>
      </div>

      <!-- Apple Watch Form -->
      <div id="form-type-applewatch" class="spec-form" style="display: none">
        <h3>Thông số Apple Watch</h3>
        <div>
          <label>Công nghệ màn hình:</label
          ><input type="text" name="specs['Công nghệ màn hình']" />
        </div>
        <div>
          <label>Đường kính mặt:</label
          ><input type="text" name="specs['Đường kính mặt']" />
        </div>
        <div>
          <label>Kích thước cổ tay phù hợp:</label
          ><input type="text" name="specs['Kích thước cổ tay phù hợp']" />
        </div>
        <div>
          <label>Nghe, gọi:</label
          ><input type="text" name="specs['Nghe, gọi']" />
        </div>
        <div>
          <label>Tiện ích sức khoẻ:</label
          ><input type="text" name="specs['Tiện ích sức khoẻ']" />
        </div>
        <div>
          <label>Tương thích:</label
          ><input type="text" name="specs['Tương thích']" />
        </div>
        <div>
          <label>Thời lượng pin:</label
          ><input type="text" name="specs['Thời lượng pin']" />
        </div>
        <div>
          <label>Hãng sản xuất:</label
          ><input type="text" name="specs['Hãng sản xuất']" />
        </div>
      </div>

      <br />
      <button type="submit">Lưu thông số</button>
    </form>

    <script>
      function showFieldsByProductType() {
        const select = document.getElementById("productSelect");
        const selectedOption = select.options[select.selectedIndex];
        const type = selectedOption.getAttribute("data-type");

        const allForms = document.querySelectorAll(".spec-form");

        allForms.forEach((form) => {
          form.style.display = "none";

          // disable & remove required
          const inputs = form.querySelectorAll("input, textarea");
          inputs.forEach((el) => {
            el.disabled = true;
            el.removeAttribute("required");
          });
        });

        if (type) {
          const formToShow = document.getElementById("form-type-" + type);
          if (formToShow) {
            formToShow.style.display = "block";

            // enable & add required
            const inputs = formToShow.querySelectorAll("input, textarea");
            inputs.forEach((el) => {
              el.disabled = false;
              el.setAttribute("required", "required");
            });
          }
        }
      }

      document.addEventListener("DOMContentLoaded", showFieldsByProductType);
    </script>
  </body>
</html>
